z)

Lyon 2009 https://nmap.org/book/nmap-overview-and-demos.html :

- Eka vaihe selvittää verkon struktuuria, mitä ip-osotteita käytössä, mitä palomuuri- ja suodatus menetelmiä käytössä.
- Nmap list scan jotta näkee kaikki ip-osoitteet verkossa, osana syytä ettei vahingossakaan skannaa vääriä osotteita
- -sS SYN scan, perus TCP porttien skannaus
- -p- Skannaa jokaisen portin 1-65535 eikä vain 1000 porttia.
- -PE -PP -PS80,443 -PA3389 -PU40125 näillä yritetään löytää hosteja joihin oikeasti saa yhteyden välttääkseen turhia skannauksia.
- -A tarkoittaa tarkempaa skannausta joka yrittää saada lisätietoa järjestelmästä kuten käyttöjärjestelmän
- -T4 vaihtaa ajotusta agressiiviselle? en oikein ymmärtänyt mitä tarkoittaa
- -oA avatartcpscan-%D lopputulos tulee joka formaatissa ja tiedoston nimeen lisätään päivämäärä.
- 6.209.24.0/24 6.207.0.0/22 en myöskään kunnolla ymmärtänyt tätä kohtaa
- skannauksessa huomataan useampi haavoittuvuus esim. ISC BIND, SSHv1 ja verkossa on kone jossa pyörii Windows XP.

- nmap -v -sS -O 10.2.1.3. skannaa TCP portit ja käyttöjärjestelmän kohteesta 10.2.1.3
- Koska järjestelmä on vanha siinä on tunnettu haavoittuvuus jonka avulla voidaan vaihtaa root käyttäjän salasana

https://nmap.org/book/man-port-scanning-basics.html

- open = Hyväksyy TCP, UDP ja SCTP yhteydet. Yleisin kohde hyökkäyksille koska jokainen avoin portti on riski hyökkäykselle. Avoimet portit myös kertovat mikä sovellus käyttää sitä
- closed = suljettu portti johon saa yhteyden mutta mikään sovellus ei kuuntele sitä. Voidaan käyttää varmistamaan että host on käynnissä koska paketit pääsevät perille.
- filtered = portti on suodatettu niin että nmap ei voi varmistaa onko portti auki koska paketti ei pääse perille. Koska varmuutta ei ole niin se hidastaa skannausta.
- unfiltered = suodattamaton portti johon saa yhteyden mutta Nmap ei osaa päätellä onko se auki vai kiinni. Tarkemmat skannaukset voivat kertoa onko portti auki vai ei.
- open|filtered = Nmap käyttää tätä luokitusta jos se ei ole varma onko portti auki vai suodatettu. Epävarmuus johtuu koska vastaus pakettia ei tullut.
- closed|filtered = Nmap käyttää tätä luokitusta jos se ei ole vamrma onko portti kiinni vai suodatettu.

https://nmap.org/book/man-port-scanning-techniques.html

- -sS (TCP SYN scan) Yleisin tapa skannata, nopea, suhteellisen huomaamaton ja ei aiheuta vahinkoa kohteelle. Ei avaa kunnollista TCP-yhteyttä vaan odottaa vastausta kohteelta jonka avulla voidaan päätellä onko portti auki.
- -sT (TCP connect scan) Tämä on perus vaihtoehto jos SYN skannaus ei ole mahdollista. Hitaampi, tarvitsee enemmän paketteja saadakseen saman tiedon kuin SYN ja sen huomaa helpommin.
- -sU (UDP scans) Hidas tapa skannata, koska UDP-skannaus on vaikeampaa jotkut eivät huomioi niitä. Skannausta voi nopeuttaa skannaamalla useampaa kohdetta samanaikaisesti ja jättämällä huomioimatta kohteet jotka ovat hitaita.

a) 

Aloitetaan varmistamalla ettei ole yhteyttä internettiin.

![image](https://user-images.githubusercontent.com/94476967/202847797-61cf4809-cad7-415d-977d-f92fb4e658b3.png)

Komento skannata portti 53 

![image](https://user-images.githubusercontent.com/94476967/202849188-61754c5c-7dd7-4fc3-a878-e8f488cc9b5c.png)

jos olen oikein ymmärtänyt miten lukea tätä niin, kun source on 192.188.39.4 ja sen infossa on SYN ACK viittaisi siihen että portti on auki.

![image](https://user-images.githubusercontent.com/94476967/202849991-94c51b7d-6718-4acc-9fe8-4bf930760dea.png)
b) 

Aluksi komento ei toiminut koska tarvitsee root-oikeudet joten uusiksi sama sudo:n kanssa

![image](https://user-images.githubusercontent.com/94476967/202849527-a9bfcdde-96db-4c39-9dc7-73b490bc0c30.png)

sama kuin edellisessä eli source, portti, SYN ACK

![image](https://user-images.githubusercontent.com/94476967/202849927-58098c62-d268-415e-95cb-c16cd83fb61f.png)

c) 

https://linuxhint.com/nmap_ping_sweep/

Vielä varmuudeksi pingasin google varmistaakseni etten ole internetissä. Skannataan ip osoitteet väliltä 192.168.39.1 - 192.168.39.255

![image](https://user-images.githubusercontent.com/94476967/202850913-294b0713-9a53-46c2-9013-84a63a2b9dd9.png)

Hakuja ja kun löyty host niin ilmoittaa MAC-osoitteen.

![image](https://user-images.githubusercontent.com/94476967/202851001-1b0db750-0602-4624-97b3-17ebe47de815.png)

d)

-Pn lipun avulla host discoveryn ei pitäisi olla päällä. Elikkä host discovery-vaihetta ei pitäisi tapahtua jolloinka ei tarkisteta on kone päällä.

![image](https://user-images.githubusercontent.com/94476967/202852079-14f3bff7-cce7-4d86-aa8f-9a423e297bbe.png)

ARP-kyselyjä silti tapahtuu joten en ole varma toimiiko komento oikein vai ymmärsinkö jotain väärin. Vai liittyyköö se tohon ICMP jotenkin. En oikein ymmärtänyt kunnolla mitä tässä vaiheessa tapahtuu.

![image](https://user-images.githubusercontent.com/94476967/202852301-22e0223d-aa4f-4b17-b79f-a71e61063c0f.png)

![image](https://user-images.githubusercontent.com/94476967/202852408-a6e08a4b-f8ce-4478-82ad-ec962f18ce6a.png)

e)

https://github.com/Tsufel/Tunkeutumistestaus/blob/main/h4/teht%C3%A4v%C3%A4t.md

Skannataan portin 80 versio.

![image](https://user-images.githubusercontent.com/94476967/202853122-88f8fddc-eff8-482b-84ee-27916a4d34b4.png)

Näkyy palvelimen tietoja.

![image](https://user-images.githubusercontent.com/94476967/202853105-5114c062-ecd4-47a3-922c-f9c501991fe2.png)

f)

Porttien 10-80 välin skannaus.

![image](https://user-images.githubusercontent.com/94476967/202853384-9b8be5c2-a236-4772-9405-2b53a9787285.png)

Eipä paljoa uutta, RST ACK tarkoittaa että portti on kiinni.

![image](https://user-images.githubusercontent.com/94476967/202853518-c024b687-a217-4846-9053-c757f6867933.png)

Yleisimpien 5 avoimen portin skannaus

![image](https://user-images.githubusercontent.com/94476967/202853583-c1816567-34ce-4e9e-a76e-a6750a6e77b6.png)

![image](https://user-images.githubusercontent.com/94476967/202853641-efd66b82-4ef9-43bb-9812-9a55fe656511.png)

g)

Käsittääkseni toimii samalla tavalla kuin 192.168.39.* eli skannaa vikaan osioon 0-255

![image](https://user-images.githubusercontent.com/94476967/202853801-bbf7bdc6-4d72-45d5-a3ef-9c92efe08ae6.png)

Skannataan halutulta väliltä ip-osoitteet, koska käytin tehtävänannon esimerkkiä 100-130 ei löytynyt yhtäkään.

![image](https://user-images.githubusercontent.com/94476967/202853918-728635bd-be63-4971-b6fe-dc0d1e6e37db.png)

h)

-oA tallentaa tulokset 3 eri formaatissa. foo on tiedoston nimi.

![image](https://user-images.githubusercontent.com/94476967/202854450-cb75dffe-5b8e-42c7-a47b-4065642c2886.png)

![image](https://user-images.githubusercontent.com/94476967/202854498-30301bd0-873d-4b86-8893-083d1bc167a3.png)

![image](https://user-images.githubusercontent.com/94476967/202854560-6d0e6ecc-4af2-4f55-b620-856c7303bbbf.png)

![image](https://user-images.githubusercontent.com/94476967/202854598-d640f9d0-5432-4246-ada2-de2c4bf3f280.png)

on myös xml-tiedosto mutta varmaankin pointti on tullut selväksi.

k)

Verbositya testasin laittamalla -v lipun. Kerrotaan extra tietoa ja mitä porttia skannataan.

![image](https://user-images.githubusercontent.com/94476967/202854957-76f810ee-0655-493c-9e43-fc4fbdd5e68b.png)

l)

![image](https://user-images.githubusercontent.com/94476967/202855150-ef375ed6-2ff7-4a14-bb44-448e8406b380.png)

![image](https://user-images.githubusercontent.com/94476967/202855215-2011308d-c10b-42fa-831a-1f4b7fc12b59.png)

pakettien määrissä pieni ero, en oikein ymmärrä tarpeeksi analysoimaan tarkemmin.

![image](https://user-images.githubusercontent.com/94476967/202855252-669c6f75-e3e5-42af-bb73-bd284ff7d5fc.png)

![image](https://user-images.githubusercontent.com/94476967/202855287-b306c191-4c77-4aac-8898-6eb0a1b6232a.png)

m)

-A lipulla, en vieläkään ymmärrä täysin mitä se tekee mutta ainakin nyt löytyy enemmän tietoa esim. käyttöjärjestelmästä. Kesti n.24 sekuntia ja 42 tuhatta pakettia.

![image](https://user-images.githubusercontent.com/94476967/202855770-b9c51823-37a5-40e4-bc27-5dc0311d1c6b.png)

![image](https://user-images.githubusercontent.com/94476967/202855919-a55ca061-814a-45d3-b7e1-ad08b039403e.png)

ilman -A lippua 0.34 sekuntia noin 2000 pakettia.

![image](https://user-images.githubusercontent.com/94476967/202855962-601174ac-8d74-4524-b808-4435f9749982.png)

![image](https://user-images.githubusercontent.com/94476967/202856032-a24352af-5b56-4b08-986f-a1a67b81167a.png)
